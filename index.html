<!DOCTYPE html>
<html>
<head>
  <title>twilson63.sh</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="https://unpkg.com/tachyons" />
  <link rel="stylesheet" href="https://unpkg.com/animate.css" />

</head>
<body>
	<div id="app">
    <div class="dt vh-100 center helvetica">
      <div class="dtc v-mid w-50 center tc">
        <h1 class="ttu tracked f2 light-red">Create Short URL</h1>
        <div class="pa4-l animated fadeIn">
          <form class="bg-light-red mw7 center pa4 br2-ns ba b--black-10">
            <fieldset class="cf bn ma0 pa0">
              <div class="cf">
                <label class="clip" for="web-address">URL</label>
                <input autofocus class="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns" 
                  placeholder="https://your-web-address.here" type="text" name="url" value="" id="web-address" />
                <input class="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns" 
                  type="submit" value="Shorten" />
              </div>
            </fieldset>
          </form>
          <div id="surl" class="mt3">
            
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.querySelector('form').addEventListener('submit', function (event) {
      event.preventDefault()
      const url = document.querySelector('input').value
      fetch('/api/surl', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        }, 
        body: JSON.stringify({url})
      })
      .then(res => res.json())
      .then(res => {
        document.querySelector('#surl').innerHTML = `<a href="${'https://twilson63.sh/' + res.id}">${'https://twilson63.sh/' + res.id}</a>`
      }) 
    })
      
  </script>

</body>
</html>